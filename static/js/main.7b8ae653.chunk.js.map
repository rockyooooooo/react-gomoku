{"version":3,"sources":["components/ActiveChess.js","components/Square.js","components/BoardRow.js","components/Board.js","components/Gomoku.js","index.js"],"names":["StyledActiveChess","styled","div","props","square","ActiveChess","boardRowIndex","squareIndex","onClick","StyledSquare","Square","BOARD_WIDTH","BOARD_HEIGHT","StyledBoardRow","BoardRow","row","map","index","Board","squares","StyledGomoku","Main","Header","Title","h1","Subtitle","h2","Info","Status","initSquares","i","j","push","Gomoku","useState","history","setHistory","isBlackNext","setIsBlackNext","status","setStatus","winner","setWinner","round","setRound","current","jumpTo","step","moves","move","description","useEffect","y","x","newHistory","JSON","parse","stringify","slice","concat","length","calculateWinner","countContinuousChess","currentX","currentY","directionX","directionY","targetColor","tempX","tempY","total","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7b8ae653.chunk.js","sourcesContent":["import styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledActiveChess = styled.div`\r\n  position: absolute;\r\n  z-index: 1;\r\n  padding: 0.75rem;\r\n  border-radius: 50%;\r\n\r\n  background: ${(props) => {\r\n    return props.square === 'black' ?\r\n    '#000' :\r\n    props.square === 'white' ?\r\n    '#fff' :\r\n    'transparent'\r\n  }}\r\n`\r\n\r\nexport default function ActiveChess({ square, boardRowIndex, squareIndex, onClick }) {\r\n  return (\r\n    <StyledActiveChess\r\n      square={square}\r\n      onClick={onClick(boardRowIndex, squareIndex)}\r\n    />\r\n  )\r\n}\r\n\r\nActiveChess.propTypes = {\r\n  square: PropTypes.oneOf([\r\n    null,\r\n    'black',\r\n    'white'\r\n  ]),\r\n  boardRowIndex: PropTypes.number,\r\n  squareIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import styled from 'styled-components'\r\nimport ActiveChess from './ActiveChess'\r\nimport { BOARD_WIDTH, BOARD_HEIGHT } from './Gomoku'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledSquare = styled.div`\r\n  background: #d5b092; \r\n  position: relative;\r\n  display: inline-block;\r\n  border: 1px solid black;\r\n  padding: 0.75rem;\r\n`\r\n\r\nexport default function Square({ square, boardRowIndex, squareIndex, onClick }) {\r\n  return (\r\n    <StyledSquare>\r\n      {\r\n        squareIndex >= BOARD_WIDTH - 1 ||\r\n        boardRowIndex >= BOARD_HEIGHT - 1 ?\r\n        '' :\r\n        <ActiveChess\r\n          square={square}\r\n          boardRowIndex={boardRowIndex}\r\n          squareIndex={squareIndex}\r\n          onClick={onClick}\r\n        />\r\n      }\r\n    </StyledSquare>\r\n  )\r\n}\r\n\r\nSquare.propTypes = {\r\n  square: PropTypes.oneOf([\r\n    null,\r\n    'black',\r\n    'white'\r\n  ]),\r\n  boardRowIndex: PropTypes.number,\r\n  squareIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import styled from 'styled-components'\r\nimport Square from './Square'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledBoardRow = styled.div`\r\n  margin-bottom: -4px;  // 抵銷奇怪的 margin\r\n`\r\n\r\nexport default function BoardRow({ row, boardRowIndex, onClick }) {\r\n  return (\r\n      <StyledBoardRow>\r\n        {row.map((square, index) => {\r\n          return (\r\n            <Square\r\n              key={`squareKey${index}`}\r\n              square={square}\r\n              squareIndex={index}\r\n              boardRowIndex={boardRowIndex}\r\n              onClick={onClick}\r\n            />\r\n          )\r\n        })}\r\n      </StyledBoardRow>\r\n  )\r\n}\r\n\r\nBoardRow.propTypes = {\r\n  row: PropTypes.arrayOf(\r\n    PropTypes.oneOf([\r\n      null,\r\n      'black',\r\n      'white'\r\n    ])\r\n  ),\r\n  boardRowIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import BoardRow from './BoardRow'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default function Board({ squares, onClick }) {\r\n  return (\r\n    <div>\r\n      {squares.map((row, index) => {\r\n        return (\r\n          <BoardRow\r\n            key={`rowKey${index}`}\r\n            row={row}\r\n            boardRowIndex={index}\r\n            onClick={onClick} \r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nBoard.propTypes = {\r\n  squares: PropTypes.arrayOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.oneOf([\r\n        null,\r\n        'black',\r\n        'white'\r\n      ])\r\n    )\r\n  ),\r\n  onClick: PropTypes.func\r\n}","import { useEffect, useState } from 'react'\r\nimport Board from './Board'\r\nimport styled from 'styled-components'\r\n\r\nexport const BOARD_WIDTH = 19\r\nexport const BOARD_HEIGHT = 19\r\n\r\nconst StyledGomoku = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100vh;\r\n  gap: 2rem;\r\n`\r\n\r\nconst Main = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 2rem;\r\n`\r\n\r\nconst Header = styled.div`\r\n  text-align: center;\r\n`\r\n\r\nconst Title = styled.h1`\r\n  font-size: 3rem\r\n`\r\n\r\nconst Subtitle = styled.h2`\r\n  font-size: 2rem;\r\n`\r\n\r\nconst Info = styled.div``\r\n\r\nconst Status = styled.div`\r\n  width: 15rem;\r\n  font-size: 1.5rem;\r\n  text-transform: capitalize;\r\n`\r\n\r\nconst initSquares = []\r\nfor(let i = 0; i < BOARD_HEIGHT; i++) {\r\n  const row = []\r\n  for(let j = 0; j < BOARD_WIDTH; j++) {\r\n    row.push(null)\r\n  }\r\n  initSquares.push(row)\r\n}\r\n\r\nexport default function Gomoku() {\r\n  const [history, setHistory] = useState([{\r\n    squares: initSquares\r\n  }])\r\n  const [isBlackNext, setIsBlackNext] = useState(true)\r\n  const [status, setStatus] = useState('')\r\n  const [winner, setWinner] = useState('')\r\n  const [round, setRound] = useState(0)\r\n\r\n  const current = history[round].squares\r\n\r\n  const jumpTo = (step) => {\r\n    return () => {\r\n      setRound(step)\r\n      setIsBlackNext(!(step % 2))\r\n      setWinner('')\r\n    }\r\n  }\r\n\r\n  const moves = history.map((move, step) => {\r\n    const description = step ?\r\n      `Go to Move ${step}` :\r\n      `Go to Game Start`\r\n    return (\r\n      <li key={step}>\r\n        <button onClick={jumpTo(step)}>{description}</button>\r\n      </li>\r\n    )\r\n  })\r\n\r\n  useEffect(() => {\r\n    setStatus(winner ?\r\n      `Winner is: 🎉${winner}🎉` :\r\n      `嗯～下面一位：${isBlackNext ? 'Black' : 'White'}`\r\n    )\r\n  }, [winner, isBlackNext])\r\n\r\n  const handleClick = (y, x) => {\r\n    return () => {\r\n      if (current[y][x] || winner) return\r\n\r\n      const newHistory = JSON.parse(JSON.stringify(history.slice(0, round + 1)))\r\n      const squares = current.slice()\r\n      squares[y][x] = isBlackNext ? 'black' : 'white'\r\n      setHistory(newHistory.concat([{\r\n        squares\r\n      }]))\r\n      setIsBlackNext(!isBlackNext)\r\n      setRound(newHistory.length)\r\n      setWinner(calculateWinner(squares, y, x) ? squares[y][x] : '')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledGomoku>\r\n      <Main>\r\n        <Header>\r\n          <Title>五子棋</Title>\r\n          <Subtitle>Gomoku</Subtitle>\r\n        </Header>\r\n        <Board squares={current} onClick={handleClick} />\r\n      </Main>\r\n      <Info>\r\n        <Status>\r\n          {status}\r\n        </Status>\r\n        <ol>{moves}</ol>\r\n      </Info>\r\n    </StyledGomoku>\r\n  )\r\n}\r\n\r\nconst calculateWinner = (squares, y, x) => {\r\n  return countContinuousChess(squares, x, y, 1, 0) + countContinuousChess(squares, x, y, -1, 0) >= 4 ||\r\n    countContinuousChess(squares, x, y, 0, 1) + countContinuousChess(squares, x, y, 0, -1) >=4 ||\r\n    countContinuousChess(squares, x, y, -1, -1) + countContinuousChess(squares, x, y, 1, 1) >=4 ||\r\n    countContinuousChess(squares, x, y, 1, -1) + countContinuousChess(squares, x, y, -1, 1) >=4\r\n}\r\n\r\nconst countContinuousChess = (squares, currentX, currentY, directionX, directionY) => {\r\n  const targetColor = squares[currentY][currentX]\r\n  let tempX = currentX + directionX\r\n  let tempY = currentY + directionY\r\n  let total = 0\r\n\r\n  while(squares[tempY][tempX] === targetColor) {\r\n    total++\r\n    tempX += directionX\r\n    tempY += directionY\r\n  }\r\n\r\n  return total\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport Gomoku from './components/Gomoku'\r\n\r\nReactDOM.render(\r\n  <Gomoku />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}