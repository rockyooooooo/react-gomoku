{"version":3,"sources":["components/ActiveChess.js","components/Square.js","components/BoardRow.js","components/Board.js","components/Gomoku.js","index.js"],"names":["StyledActiveChess","styled","div","props","square","ActiveChess","boardRowIndex","squareIndex","onClick","StyledSquare","Square","BOARD_WIDTH","BOARD_HEIGHT","StyledBoardRow","BoardRow","row","map","index","Board","squares","StyledGomoku","Main","Header","Title","h1","Subtitle","h2","Info","Status","initSquares","i","j","push","Gomoku","useState","history","setHistory","isBlackNext","setIsBlackNext","status","setStatus","round","setRound","current","jumpTo","step","moves","move","description","useEffect","winner","calculateWinner","newHistory","JSON","parse","stringify","slice","concat","length","searchRow","searchColumn","searchSlash","searchBackslash","count","k","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.02e8b4df.chunk.js","sourcesContent":["import styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledActiveChess = styled.div`\r\n  position: absolute;\r\n  z-index: 1;\r\n  padding: 1rem;\r\n  border-radius: 50%;\r\n\r\n  background: ${(props) => {\r\n    return props.square === 'black' ?\r\n    '#000' :\r\n    props.square === 'white' ?\r\n    '#fff' :\r\n    'transparent'\r\n  }}\r\n`\r\n\r\nexport default function ActiveChess({ square, boardRowIndex, squareIndex, onClick }) {\r\n  return (\r\n    <StyledActiveChess\r\n      square={square}\r\n      onClick={onClick(boardRowIndex, squareIndex)}\r\n    />\r\n  )\r\n}\r\n\r\nActiveChess.propTypes = {\r\n  square: PropTypes.oneOf([\r\n    null,\r\n    'black',\r\n    'white'\r\n  ]),\r\n  boardRowIndex: PropTypes.number,\r\n  squareIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import styled from 'styled-components'\r\nimport ActiveChess from './ActiveChess'\r\nimport { BOARD_WIDTH, BOARD_HEIGHT } from './Gomoku'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledSquare = styled.div`\r\n  background: #d5b092; \r\n  position: relative;\r\n  display: inline-block;\r\n  border: 1px solid black;\r\n  padding: 1rem;\r\n`\r\n\r\nexport default function Square({ square, boardRowIndex, squareIndex, onClick }) {\r\n  return (\r\n    <StyledSquare>\r\n      {\r\n        squareIndex >= BOARD_WIDTH - 1 ||\r\n        boardRowIndex >= BOARD_HEIGHT - 1 ?\r\n        '' :\r\n        <ActiveChess\r\n          square={square}\r\n          boardRowIndex={boardRowIndex}\r\n          squareIndex={squareIndex}\r\n          onClick={onClick}\r\n        />\r\n      }\r\n    </StyledSquare>\r\n  )\r\n}\r\n\r\nSquare.propTypes = {\r\n  square: PropTypes.oneOf([\r\n    null,\r\n    'black',\r\n    'white'\r\n  ]),\r\n  boardRowIndex: PropTypes.number,\r\n  squareIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import styled from 'styled-components'\r\nimport Square from './Square'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst StyledBoardRow = styled.div`\r\n  margin-bottom: -4px;  // 抵銷奇怪的 margin\r\n`\r\n\r\nexport default function BoardRow({ row, boardRowIndex, onClick }) {\r\n  return (\r\n      <StyledBoardRow>\r\n        {row.map((square, index) => {\r\n          return (\r\n            <Square\r\n              key={`squareKey${index}`}\r\n              square={square}\r\n              squareIndex={index}\r\n              boardRowIndex={boardRowIndex}\r\n              onClick={onClick}\r\n            />\r\n          )\r\n        })}\r\n      </StyledBoardRow>\r\n  )\r\n}\r\n\r\nBoardRow.propTypes = {\r\n  row: PropTypes.arrayOf(\r\n    PropTypes.oneOf([\r\n      null,\r\n      'black',\r\n      'white'\r\n    ])\r\n  ),\r\n  boardRowIndex: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}","import BoardRow from './BoardRow'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default function Board({ squares, onClick }) {\r\n  return (\r\n    <div>\r\n      {squares.map((row, index) => {\r\n        return (\r\n          <BoardRow\r\n            key={`rowKey${index}`}\r\n            row={row}\r\n            boardRowIndex={index}\r\n            onClick={onClick} \r\n          />\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nBoard.propTypes = {\r\n  squares: PropTypes.arrayOf(\r\n    PropTypes.arrayOf(\r\n      PropTypes.oneOf([\r\n        null,\r\n        'black',\r\n        'white'\r\n      ])\r\n    )\r\n  ),\r\n  onClick: PropTypes.func\r\n}","import { useEffect, useState } from 'react'\r\nimport Board from './Board'\r\nimport styled from 'styled-components'\r\n\r\nexport const BOARD_WIDTH = 19\r\nexport const BOARD_HEIGHT = 19\r\n\r\nconst StyledGomoku = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100vh;\r\n  gap: 2rem;\r\n`\r\n\r\nconst Main = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 2rem;\r\n`\r\n\r\nconst Header = styled.div`\r\n  text-align: center;\r\n`\r\n\r\nconst Title = styled.h1`\r\n  font-size: 3rem\r\n`\r\n\r\nconst Subtitle = styled.h2`\r\n  font-size: 2rem;\r\n`\r\n\r\nconst Info = styled.div`\r\n  width: 15rem;\r\n`\r\n\r\nconst Status = styled.div`\r\n  font-size: 1.5rem;\r\n  text-transform: capitalize;\r\n`\r\n\r\nconst initSquares = []\r\nfor(let i = 0; i < BOARD_HEIGHT; i++) {\r\n  const row = []\r\n  for(let j = 0; j < BOARD_WIDTH; j++) {\r\n    row.push(null)\r\n  }\r\n  initSquares.push(row)\r\n}\r\n\r\nexport default function Gomoku() {\r\n  const [history, setHistory] = useState([{\r\n    squares: initSquares\r\n  }])\r\n  const [isBlackNext, setIsBlackNext] = useState(true)\r\n  const [status, setStatus] = useState('')\r\n  const [round, setRound] = useState(0)\r\n\r\n  const current = history[round].squares\r\n\r\n  const jumpTo = (step) => {\r\n    return () => {\r\n      setRound(step)\r\n      setIsBlackNext(!(step % 2))\r\n    }\r\n  }\r\n\r\n  const moves = history.map((move, step) => {\r\n    const description = step ?\r\n      `Go to Move ${step}` :\r\n      `Go to Game Start`\r\n    return (\r\n      <li key={step}>\r\n        <button onClick={jumpTo(step)}>{description}</button>\r\n      </li>\r\n    )\r\n  })\r\n\r\n  useEffect(() => {\r\n    const winner = calculateWinner(current)\r\n    setStatus(winner ?\r\n      `Winner is: 🎉${winner}🎉` :\r\n      `嗯～下面一位：${isBlackNext ? 'Black' : 'White'}`\r\n    )\r\n  }, [current, isBlackNext])\r\n\r\n  const handleClick = (boardRowIndex, squareIndex) => {\r\n    return () => {\r\n      if (calculateWinner(current)) return\r\n      if (current[boardRowIndex][squareIndex]) return\r\n\r\n      const newHistory = JSON.parse(JSON.stringify(history.slice(0, round + 1)))\r\n      const squares = current.slice()\r\n      squares[boardRowIndex][squareIndex] = isBlackNext ? 'black' : 'white'\r\n      setHistory(newHistory.concat([{\r\n        squares\r\n      }]))\r\n      setIsBlackNext(!isBlackNext)\r\n      setRound(newHistory.length)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledGomoku>\r\n      <Main>\r\n        <Header>\r\n          <Title>五子棋</Title>\r\n          <Subtitle>Gomoku</Subtitle>\r\n        </Header>\r\n        <Board squares={current} onClick={handleClick} />\r\n      </Main>\r\n      <Info>\r\n        <Status>\r\n          {status}\r\n        </Status>\r\n        <ol>{moves}</ol>\r\n      </Info>\r\n    </StyledGomoku>\r\n  )\r\n}\r\n\r\nconst calculateWinner = (squares) => {\r\n  const winner = searchRow(squares) || searchColumn(squares) || searchSlash(squares) || searchBackslash(squares)\r\n  return winner\r\n}\r\n\r\nconst searchRow = (squares) => {\r\n  let current = null\r\n  let count = 1\r\n  for(let i = 0; i < squares.length; i++) {\r\n    for(let j = 0; j < squares[i].length; j++) {\r\n      if (!squares[i][j] || current !== squares[i][j]) {\r\n        current = squares[i][j]\r\n        count = 1\r\n      } else {\r\n        count++\r\n      }\r\n\r\n      if (count === 5) return current\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst searchColumn = (squares) => {\r\n  let current = null\r\n  let count = 1\r\n  for(let i = 0; i < squares.length; i++) {\r\n    for(let j = 0; j < squares[i].length; j++) {\r\n      if (!squares[j][i] || current !== squares[j][i]) {\r\n        current = squares[j][i]\r\n        count = 1\r\n      } else {\r\n        count++\r\n      }\r\n\r\n      if (count === 5) return current\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst searchSlash = (squares) => {\r\n  let current = null\r\n  let count = 1\r\n  for(let i = 0; i < squares.length; i++) {\r\n    for(let j = 0; j < squares[i].length; j++) {\r\n      if (!squares[i][j]) {\r\n        current = squares[i][j]\r\n        count = 1\r\n      } else {\r\n        current = squares[i][j]\r\n        for(let k = 1; k < 5; k++) {\r\n          if (current !== squares[i + k][j - k]) {\r\n            count = 1\r\n            break\r\n          }\r\n          count++\r\n        }\r\n      }\r\n\r\n      if (count === 5) return current\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst searchBackslash = (squares) => {\r\n  let current = null\r\n  let count = 1\r\n  for(let i = 0; i < squares.length; i++) {\r\n    for(let j = 0; j < squares[i].length; j++) {\r\n      if (!squares[i][j]) {\r\n        current = squares[i][j]\r\n        count = 1\r\n      } else {\r\n        current = squares[i][j]\r\n        for(let k = 1; k < 5; k++) {\r\n          if (current !== squares[i + k][j + k]) {\r\n            count = 1\r\n            break\r\n          }\r\n          count++\r\n        }\r\n      }\r\n\r\n      if (count === 5) return current\r\n    }\r\n  }\r\n  return null\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport Gomoku from './components/Gomoku'\r\n\r\nReactDOM.render(\r\n  <Gomoku />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}